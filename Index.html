<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Estimated revenue â€” Mock</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body {
    margin:0; background:#0b0b0c; color:#e9eef2;
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "SF Pro Display", "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    font-weight: 400;
  }
  h1 {
    margin:0;font-size:20px;padding:16px;
    font-weight:600;
  }
  .filters {
    display:flex;gap:8px;padding:0 12px;margin-bottom:8px;
  }
  .btn {
    padding:6px 14px;border-radius:8px;
    background:#1c1d20;color:#fff;cursor:pointer;font-size:14px;
    border:none;font-weight:500;
  }
  .btn.active {
    background:#fff;color:#000;
  }
  .chart-container {
    height:260px;margin:0 12px;
  }
  .list {
    margin:16px 12px;display:flex;
    justify-content:space-between;font-weight:600;
    font-size:15px;
  }
  [contenteditable="true"]:focus {
    text-decoration:underline;outline:none
  }
  /* bottom nav mock */
  .bottom-nav {
    position:fixed;bottom:0;left:0;right:0;
    height:60px;background:#000;border-top:1px solid #222;
    display:flex;align-items:center;justify-content:space-around;
    font-size:12px;
  }
  .bottom-nav div {
    display:flex;flex-direction:column;align-items:center;
    color:#aaa;font-weight:500
  }
  .bottom-nav .active {color:#e34c3c}
</style>
</head>
<body>

<h1>Estimated revenue</h1>

<!-- Filter buttons -->
<div class="filters" id="rangeFilters">
  <button class="btn" data-range="7">7D</button>
  <button class="btn active" data-range="28">28D</button>
  <button class="btn" data-range="90">90D</button>
  <button class="btn" data-range="365">365D</button>
  <button class="btn" data-range="Jan">Jan</button>
  <button class="btn" data-range="Dec">Dec</button>
</div>

<!-- Chart -->
<div class="chart-container">
  <canvas id="revChart"></canvas>
</div>

<!-- Revenue total -->
<div class="list">
  <span>Estimated revenue</span>
  <span id="totalRevenue" contenteditable="true" data-money>$97.74</span>
</div>

<!-- Bottom nav -->
<div class="bottom-nav">
  <div>Dashboard</div>
  <div>Content</div>
  <div class="active">Analytics</div>
  <div>Comments</div>
  <div>Earn</div>
</div>

<script>
/* ---------- Helpers ---------- */
const fmtMoney = n => `${n<0?'-':''}$${Math.abs(n).toFixed(2)}`;
const parseMoney = s => +String(s).replace(/[^\d.-]/g,'') || 0;

/* ---------- Random data ---------- */
function randomSeries(len){
  let arr=[],y=0;
  for(let i=0;i<len;i++){
    y += (Math.random()*2-1)*3;
    arr.push(+y.toFixed(2));
  }
  return arr;
}
function buildDates(n){
  const out=[],today=new Date();
  for(let i=n-1;i>=0;i--){
    let d=new Date(today); d.setDate(today.getDate()-i);
    out.push(d.toLocaleDateString('en-US',{month:'short',day:'numeric'}));
  }
  return out;
}

/* ---------- Init Chart ---------- */
let currentRange=28;
const ctx=document.getElementById('revChart');
let chart=new Chart(ctx,{
  type:'line',
  data:{
    labels:buildDates(currentRange),
    datasets:[{
      data:randomSeries(currentRange),
      borderColor:'#5ec2ff',
      tension:0.3,
      borderWidth:2,
      pointRadius:0
    }]
  },
  options:{
    responsive:true,
    plugins:{
      legend:{display:false},
      tooltip:{callbacks:{label:ctx=>fmtMoney(ctx.parsed.y)}}
    },
    scales:{
      y:{ticks:{callback:v=>fmtMoney(v)}}
    }
  }
});

/* ---------- Randomize on click ---------- */
ctx.onclick=()=>{
  chart.data.labels=buildDates(currentRange);
  chart.data.datasets[0].data=randomSeries(currentRange);
  chart.update();
};

/* ---------- Switch range ---------- */
document.getElementById('rangeFilters').addEventListener('click',e=>{
  const b=e.target.closest('button[data-range]');
  if(!b) return;
  document.querySelectorAll('.btn').forEach(x=>x.classList.remove('active'));
  b.classList.add('active');
  if(!isNaN(+b.dataset.range)){
    currentRange=+b.dataset.range;
    chart.data.labels=buildDates(currentRange);
    chart.data.datasets[0].data=randomSeries(currentRange);
    chart.update();
  }
});

/* ---------- Editable money field ---------- */
document.querySelectorAll('[data-money]').forEach(el=>{
  el.addEventListener('focus',()=>{el.textContent=parseMoney(el.textContent)});
  el.addEventListener('blur',()=>{el.textContent=fmtMoney(parseMoney(el.textContent))});
  el.addEventListener('keydown',ev=>{
    if(ev.key==='Enter'){ev.preventDefault();el.blur();}
  });
});
</script>
</body>
</html>
